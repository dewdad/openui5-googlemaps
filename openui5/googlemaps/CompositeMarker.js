sap.ui.define(["jquery.sap.global","./Marker","google.maps"],function(e,t,r){"use strict";var a=t.getMetadata()._sLibraryName;sap.ui.getCore().getEventBus().subscribe(r.notifyEvent,function(){$.sap.require(a+".richmarker")}),$.sap.includeStyleSheet($.sap.getModulePath(a)+"/css/markerclusters.css");var s=t.extend("openui5.googlemaps.CompositeMarker",{metadata:{properties:{count:{type:"int",defaultValue:1,bindable:"bindable"}}},renderer:{}});s.prototype.setCount=function(e){this.setProperty("count",e,!0),this.marker&&this.marker.set("count",this.getCount())},s.prototype.setIcon=function(){this.getCount()>1||t.prototype.setIcon.apply(this,arguments)};var n=[{max:9,name:"gmaps-cluster-m1"},{max:99,name:"gmaps-cluster-m2"},{max:999,name:"gmaps-cluster-m3"},{max:Number.POSITIVE_INFINITY,name:"gmaps-cluster-m4"},{max:Number.POSITIVE_INFINITY,name:"gmaps-cluster-m5"}];return s.prototype.setMarker=function(){this.marker&&(this.marker.setMap(null),this.marker=null),t.prototype.setMarker.call(this)},s.prototype.createMarker=function(){var r,a=this.getCount();if(a>1){var s=Math.min(a.toString().length,n.length),o=n[s-1].name,i=$(document.createElement("DIV")).addClass(o).text(a);r=window.cmark=new RichMarker(e.extend(this.getOptions(),{flat:!0,anchor:RichMarkerPosition.MIDDLE,content:i[0]})),r.set("count",this.getCount())}else r=t.prototype.createMarker.call(this);return r},s},!0);